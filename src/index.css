
@import url('https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital,wght@0,400;1,400&family=Inter:wght@400;500;700&display=swap');
@import './styles/tokens.css';
@import './styles/cozy-glass.css';
@import './styles/glass.css';
@import './styles/poster-grade.css';
@reference theme;

@layer base {
  html, body { height: 100%; }
  body {
    color: #4A423C; /* bark-800 for stronger readability */
    font-family: Inter, system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Directional sunlight with chromatic warmth and subtle vignette */
    background:
      radial-gradient(1100px 800px at 15% 10%, rgba(255,245,210,0.65), rgba(255,250,235,0.35) 45%, transparent 70%),
      radial-gradient(950px 750px at 85% 90%, rgba(240,230,215,0.45), transparent 65%),
      linear-gradient(to bottom, #FFFAF2 0%, #F5EFE3 40%, #EEE6D8 100%);
    min-height: 100vh;
    filter: contrast(1.03) saturate(1.06);
  }
}

@utility text-title { color: rgba(55,50,40,0.92); font-weight: 600; letter-spacing: -0.01em; }
@utility text-body  { color: rgba(55,50,40,0.82); font-weight: 400; }
@utility text-meta  { color: rgba(74,66,60,0.88); font-weight: 500; letter-spacing: -0.005em; }
@utility section-title { color: rgba(55,50,40,0.95); font-weight: 600; letter-spacing: 0.01em; }
@utility section-meta  { color: rgba(74,66,60,0.85); font-weight: 500; }
@utility text-muted { color: rgba(74,66,60,0.75); }
@utility badge      {
  background-color: rgb(255 255 255 / 0.22);
  border: 1px solid rgb(255 255 255 / 0.32);
  backdrop-filter: blur(12px);
  border-radius: 9999px;
  padding: 0.25rem 0.625rem; /* py-1 px-2.5 */
  font-weight: 500;
}
@utility badge-moss {
  background-color: rgba(111,138,107,0.14);
  border: 1px solid rgba(111,138,107,0.28);
  backdrop-filter: blur(10px);
  border-radius: 9999px;
  padding: 0.25rem 0.625rem;
  color: #536D57;
  font-weight: 500;
}
@utility badge-aurum {
  background-color: rgba(232,219,181,0.18);
  border: 1px solid rgba(232,219,181,0.32);
  backdrop-filter: blur(10px);
  border-radius: 9999px;
  padding: 0.25rem 0.625rem;
  color: #8B7355;
  font-weight: 500;
}
@utility btn-primary {
  background-image: linear-gradient(180deg, var(--moss-600) 0%, var(--moss-700) 100%);
  color: #fff;
  border-radius: 9999px;
  box-shadow: 0 2px 8px rgba(61,54,48,0.12);
}
@utility btn-secondary {
  background-color: rgb(255 255 255 / 0.22);
  border: 1px solid rgb(255 255 255 / 0.26);
  border-radius: 9999px;
  backdrop-filter: blur(12px);
  color: var(--bark-900);
}

/* Note: avoid !important overrides to keep Tailwind layering predictable */

/* Inputs */
input::placeholder, textarea::placeholder{ color:rgba(74,66,60,0.62); }
input, textarea{ color:#3D3630; }

/* Luminous sunlight layer (dedicated, under content) */
/* Note: app wrapper must sit above this with z-10 */

/* Glass card with depth - REMOVED DUPLICATE - see @layer components below */

/* Interactive refracted hover */
.interactive-glass{ transition: transform .25s ease, box-shadow .25s ease; }
.interactive-glass:hover{ transform: scale(1.02); }

/* Icon button shimmer */
.icon-btn{ @apply rounded-full; background: rgba(255,255,255,0.40); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.45); transition: all .2s ease; }
.icon-btn:hover{ background: rgba(255,255,255,0.60); box-shadow: inset 0 0 6px rgba(255,255,255,0.50); }

/* Motion-safe entrance */
@media (prefers-reduced-motion: no-preference) {
  .animate-fade-in{ animation: fade-in 420ms ease-out both; }
  .animate-slide-up{ animation: slide-up 460ms ease-out both; }
}

/* Additional warm tone utilities */
.text-moss-800{ color:#536D57; }
.text-moss-600{ color:#6F8A6B; }
.text-moss-500{ color:#8FA287; }
.text-sand-600{ color:#B3874B; }
.text-aurum-300{ color:#E8DBB5; }
.u-header{ color:#5C534A; }
.u-title{ color:#536D57; }
.u-meta{ color:#B3874B; letter-spacing: .02em; font-weight:500; }

/* Earthy accent utilities */
.accent-moss { color: var(--moss-600); }
.accent-aurum { color: var(--aurum-300); }
.bg-moss-soft { background-color: rgba(111,138,107,0.12); }
.bg-aurum-soft { background-color: rgba(232,219,181,0.14); }
.border-moss { border-color: rgba(111,138,107,0.35); }
.border-aurum { border-color: rgba(232,219,181,0.40); }

/* Radial warm background accent for sections */
.radial-warm{ position: relative; }
.radial-warm::before{
  content:""; position:absolute; inset:-16px -12px; border-radius: 28px; pointer-events:none;
  background: radial-gradient(420px 260px at 8% 6%, rgba(255, 230, 170, 0.18), transparent 60%),
              radial-gradient(360px 220px at 92% 86%, rgba(232, 219, 181, 0.16), transparent 65%);
  filter: blur(14px);
  z-index: 0;
}
.radial-warm > *{ position: relative; z-index: 1; }

/* === Depth Pass removed: single parchment gradient lives on body; sunlight uses .sunlight-layer === */

.sunlight-layer{ position:fixed; inset:0; pointer-events:none; z-index:0; background:
  radial-gradient(1100px 750px at 16% 12%, rgba(255,242,179,0.12), rgba(232,219,181,0.08) 45%, transparent 68%),
  radial-gradient(850px 620px at 82% 78%, rgba(240,230,206,0.10), rgba(255,235,190,0.06) 50%, transparent 72%),
  radial-gradient(600px 450px at 50% 50%, rgba(232,219,181,0.04), transparent 60%);
  filter: blur(20px) saturate(1.08);
}

/* sun-edge moved to @layer components to avoid duplicate */
.accent-rim{ box-shadow: 0 0 0 1px rgba(255,255,255,0.35), 0 0 0 2px rgba(232,219,181,0.18); }

/* Tailwind v4 is imported in src/tailwind.css to control evaluation order */

@layer components {
  .glass-card{
    position:relative;
    backdrop-filter: blur(20px) saturate(1.12);
    background: linear-gradient(145deg, rgba(255,255,255,0.72), rgba(255,255,255,0.60)) !important;
    border: 1px solid rgba(255,255,255,0.80) !important;
    box-shadow:
      inset 0 1px 3px rgba(255,255,255,0.55),
      inset 0 0 0 1px rgba(255,255,255,0.30),
      0 2px 6px rgba(0,0,0,0.10),
      0 12px 28px rgba(61,54,48,0.16) !important;
    border-radius: 1.25rem;
  }
  .glass-card.sun-edge::before{
    content:""; position:absolute; inset:-1px; border-radius:inherit; pointer-events:none;
    background:
      radial-gradient(520px 360px at 10% 12%, rgba(255,255,255,0.75), rgba(255,255,255,0) 58%),
      radial-gradient(300px 220px at 14% 14%, rgba(240,230,206,0.30), rgba(240,230,206,0) 62%),
      linear-gradient(135deg, rgba(255,255,255,0.45), rgba(255,255,255,0) 28%);
    mix-blend-mode: overlay;
    opacity: 1 !important;
  }

  .btn-primary{
    background-image: linear-gradient(180deg, var(--moss-600) 0%, var(--moss-700) 100%);
    color: #fff;
    border-radius: 9999px;
    box-shadow: 0 2px 8px rgba(61,54,48,0.12);
  }
  .btn-secondary{
    background-color: rgb(255 255 255 / 0.22);
    border: 1px solid rgb(255 255 255 / 0.26);
    border-radius: 9999px;
    backdrop-filter: blur(12px);
    color: var(--bark-900);
  }
}

/* (Unified) text utilities defined with @utility above to avoid duplicates */

/* After layers, avoid additional @import — all imports must appear first */

/* === Motion Layer (v2.1) === */
@layer utilities {
  /* surfaces */
  .surface-soft { background-color: rgb(255 255 255 / 0.60); backdrop-filter: blur(20px); border: 1px solid rgb(255 255 255 / 0.25); box-shadow: 0 2px 12px rgba(61,54,48,0.06); }
  .surface-glass { background-color: rgb(255 255 255 / 0.35); backdrop-filter: blur(24px); border: 1px solid rgb(255 255 255 / 0.20); }

  /* fades */
  .animate-fade-slow { animation: fade-in 420ms ease-out both; }
  .animate-rise { animation: rise 280ms cubic-bezier(.22,.61,.36,1) both; }

  /* gentle interactive lift */
  .hover-lift { transition: transform 180ms ease, box-shadow 240ms ease; }
  .hover-lift-on:hover { transform: translateY(-2px) scale(1.01); box-shadow: 0 12px 32px rgba(61,54,48,0.12); }

  /* shimmer highlight for glass chips/buttons */
  .shimmer { position: relative; overflow: hidden; }
  .shimmer::after { content:""; position:absolute; inset:0; background: linear-gradient(100deg, transparent 0%, rgba(255,255,255,0.35) 35%, transparent 70%); transform: translateX(-120%); pointer-events:none; }
  .shimmer-run:hover::after { transition: transform 600ms ease; transform: translateX(120%); }

  /* subtle diagonal shine for glass cards */
  .glass-shine { position: relative; overflow: hidden; }
  .glass-shine::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(120deg, transparent 35%, rgba(255,255,255,0.22) 50%, transparent 65%);
    mask-image: linear-gradient(120deg, transparent 40%, rgba(255,255,255,0.25) 50%, transparent 60%);
    -webkit-mask-image: linear-gradient(120deg, transparent 40%, rgba(255,255,255,0.25) 50%, transparent 60%);
    animation: shineMove 20s linear infinite;
    pointer-events: none;
  }

  @keyframes shineMove {
    0% { transform: translateX(-200%) translateY(-200%) rotate(30deg); }
    100% { transform: translateX(200%) translateY(200%) rotate(30deg); }
  }

  /* subtle sun sheen (hero only) */
  .sun-sheen { position: relative; }
  .sun-sheen::before { content:""; position:absolute; inset:-1px; border-radius: inherit; pointer-events:none; background: radial-gradient(540px 380px at 8% 10%, rgba(255,255,255,0.22), rgba(255,255,255,0) 60%); mix-blend-mode: screen; opacity:.65; animation: sheen 1800ms ease-in-out alternate infinite; }

  /* faint diagonal luminosity */
  .sunlight-soft { background: linear-gradient(145deg, rgba(255,240,210,0.05), rgba(255,255,255,0.02)); }
}

@layer base {
  @keyframes fade-in { from { opacity: 0 } to { opacity: 1 } }
  @keyframes rise { from { opacity: 0; transform: translateY(6px) } to { opacity: 1; transform: translateY(0) } }
  @keyframes sheen { from { opacity:.35 } to { opacity:.75 } }
}

/* Bottom nav active underline */
@layer components {
  .nav-active{ position: relative; }
  .nav-active::after { content:""; position:absolute; bottom:4px; left:50%; transform:translateX(-50%); width:24px; height:3px; border-radius:9999px; background-color: rgba(111,138,107,0.30); }
}

/* Reduced motion: disable animations and transitions */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}
